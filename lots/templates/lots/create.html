{% extends 'layout.html' %}
{% block content %}

<h1 class="my-4 text-center">Create Lot</h1>

<form method="post">
  {% csrf_token %}

  <div class="mb-3">
    <label class="form-label">Title</label>
    <input type="text" name="title" class="form-control" value="{{ form.title.value }}" required>
    {% if form.title.errors %}
      <div class="text-danger small">{{ form.title.errors|striptags }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea name="description" class="form-control" rows="3" required>{{ form.description.value }}</textarea>
    {% if form.description.errors %}
      <div class="text-danger small">{{ form.description.errors|striptags }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label class="form-label">Category</label>
    <select name="category" class="form-select" required>
      <option value="" disabled {% if not form.category.value %}selected{% endif %}>Оберіть категорію</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}" {% if form.category.value == cat.id|stringformat:"s" %}selected{% endif %}>
          {{ cat.title }}
        </option>
      {% endfor %}
    </select>
    {% if form.category.errors %}
      <div class="text-danger small">{{ form.category.errors|striptags }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label class="form-label">Auction</label>
    <select name="auction" class="form-select" required>
      <option value="" disabled {% if not form.auction.value %}selected{% endif %}>Оберіть аукціон</option>
      {% for auc in auctions %}
        <option value="{{ auc.id }}" {% if form.auction.value == auc.id|stringformat:"s" %}selected{% endif %}>
          {{ auc.start_time }} - {{ auc.end_time }}
        </option>
      {% endfor %}
    </select>
    {% if form.auction.errors %}
      <div class="text-danger small">{{ form.auction.errors|striptags }}</div>
    {% endif %}
  </div>

  <div class="mb-3">
    <label class="form-label">Start Price</label>
    <input type="number" name="start_price" class="form-control" value="{{ form.start_price.value }}" required>
    {% if form.start_price.errors %}
      <div class="text-danger small">{{ form.start_price.errors|striptags }}</div>
    {% endif %}
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-primary">Create</button>
    <a href="javascript:history.back()" class="btn btn-secondary">Cancel</a>
  </div>
</form>

{% endblock %}
